<div class="container">
  <h2>Gerenciar Atividades</h2>

  <div class="form">
    <h3>Adicionar Nova Atividade</h3>

    <label>Título</label>
    <input type="text" [(ngModel)]="newActivity.title" name="title" placeholder="Título da atividade">

    <label>Descrição</label>
    <textarea [(ngModel)]="newActivity.description" name="description" placeholder="Descrição da atividade"></textarea>

    <label>Disciplina</label>
    <select [(ngModel)]="newActivity.subjectId" name="subjectId">
      <option [value]="0" disabled>Selecione a disciplina</option>
      <option *ngFor="let s of subjects" [value]="s.id">{{ s.name }}</option>
    </select>

    <label>Tipo</label>
    <select [(ngModel)]="newActivity.type" name="type">
      <option value="WORK">Trabalho</option>
      <option value="EXAM">Prova</option>
    </select>

    <label>Prioridade</label>
    <select [(ngModel)]="newActivity.priority" name="priority">
      <option value="LOW">Baixa</option>
      <option value="MEDIUM">Média</option>
      <option value="HIGH">Alta</option>
    </select>

    <label>Data de entrega</label>
    <input type="date" [(ngModel)]="newActivity.deadline" name="deadline">

    <button (click)="createActivity()" [disabled]="loading">{{ loading ? 'Salvando...' : 'Adicionar Atividade' }}</button>
  </div>

  <hr>

  <div class="activities-list">
    <h3>Atividades Cadastradas</h3>
    <div *ngIf="activities.length === 0">Nenhuma atividade cadastrada.</div>

    <div class="activity-card" *ngFor="let act of activities" [class.done]="act.done">
      <h4>{{ act.title }} <small>({{ act.subject }})</small></h4>
      <p>{{ act.description }}</p>
      <p><strong>Tipo:</strong> {{ act.type }} | <strong>Prioridade:</strong> {{ act.priority }} | <strong>Entrega:</strong> {{ act.deadline }}</p>
      <button (click)="markDone(act)">{{ act.done ? 'Desmarcar' : 'Concluída' }}</button>
      <button (click)="deleteActivity(act.id!)">Excluir</button>
    </div>
  </div>
</div>
