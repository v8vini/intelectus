<h2 class="titulo">Cronograma de Estudos</h2>

<div class="cronograma-wrapper">
  <table class="cronograma">
    <thead>
      <tr>
        <th>Horário</th>
        <th *ngFor="let dia of dias">{{ dia }}</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let horario of horarios">
        <td class="hora">{{ horario }}</td>

        <td *ngFor="let dia of dias" class="celula">

          <!-- BLOCO EXISTENTE -->
          <div
            *ngIf="getBlock(dia, horario); else vazio"
            class="bloco">

            <strong>
              {{ getBlock(dia, horario)?.disciplina }}
            </strong>

            <span>
              {{ getBlock(dia, horario)?.duracao }}
            </span>

            <div class="acoes-bloco">
              <button
                class="editar"
                (click)="editar(getBlock(dia, horario)!)">
                Editar
              </button>

              <button
                class="excluir"
                (click)="excluir(getBlock(dia, horario)!.id)">
                Excluir
              </button>
            </div>
          </div>

          <!-- CÉLULA VAZIA -->
          <ng-template #vazio>
            <button
              class="add"
              (click)="selecionarHorario(dia, horario)">
              +
            </button>
          </ng-template>

        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- MODAL -->
<app-bloco-modal
  *ngIf="modalAberto"
  [dia]="diaSelecionado"
  [horario]="horarioSelecionado"
  [bloco]="blocoEditando"
  (salvarBloco)="salvarBloco($event)"
  (fechar)="fecharModal()">
</app-bloco-modal>
